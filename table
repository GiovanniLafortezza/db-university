CREATE DATABASE `db_university_schema`;
USE `db_university_schema`;

CREATE TABLE departments(
	id INT NOT NULL AUTO_INCREMENT,
	name VARCHAR(50) NOT NULL,
	address VARCHAR(150) NOT NULL,
	phone INT NOT NULL,
	email VARCHAR(255) NULL,
	website VARCHAR(255) NULL,
	head_of_departments VARCHAR(255) null,
	PRIMARY KEY(id)
);

CREATE TABLE `degrees`(
	id INT NOT NULL AUTO_INCREMENT,
	name VARCHAR(100) NOT NULL,
	`level` TINYINT NULL,
	address VARCHAR(150) NULL,
	website VARCHAR(255) NULL,
	email VARCHAR(255) NULL,
	PRIMARY KEY(id)
);

CREATE TABLE students(
	id INT NOT NULL AUTO_INCREMENT,
	name VARCHAR(50) NOT NULL,
	surname VARCHAR(50) NOT NULL,
	date_of_birth DATE NULL,
	fiscal_code CHAR(16) NOT NULL,
	enrolment_date DATE NULL,
	registration_number mediumint NULL,
	email VARCHAR(255) NULL,
	PRIMARY KEY(id)
);

-- inserire le foreign key
ALTER TABLE `degrees`
ADD COLUMN department_id INT;

ALTER TABLE `degrees` 
ADD FOREIGN KEY(department_id) REFERENCES departments(id);

ALTER TABLE students 
ADD COLUMN degrees_id INT;

ALTER TABLE students 
ADD FOREIGN KEY(degrees_id) REFERENCES `degrees`(id);
